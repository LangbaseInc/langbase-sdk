import { generateMetadata } from '@/lib/generate-metadata';
import { LanguageProvider, SimpleLanguageToggle, LanguageContent } from '@/components/LanguageToggle';

export const metadata = generateMetadata({
    title: 'Generate Image with OpenRouter',
    description: `An example demonstrating how to generate images using OpenRouter's unified API.`,
    section: 'Examples',
    slug: '/examples/images/generate-image-openrouter'
});


## Generate Image with OpenRouter

This example demonstrates how to generate images using OpenRouter's unified API through the Langbase Images API.

---
<LanguageProvider defaultLanguage='typescript'>

<RunExample api="/docs/api/images"

	title="Generate Image with OpenRouter Example"
	output={`Image generated successfully via OpenRouter!
Image URL: data:image/png;base64,`}
explanation={`
This code demonstrates how to generate an AI image using OpenRouter's unified API. Here's a step-by-step guide:

1. Initialize Langbase:
   - Set up the Langbase client with your API key

2. Configure Image Generation:
   - Provide a descriptive prompt for the image you want to generate
   - Specify the OpenRouter model (e.g., openrouter:google/gemini-2.5-flash-image-preview)
   - Pass your OpenRouter API key

3. Execution:
   - The image generation request is executed using the Langbase SDK
   - Returns the generated image URL

Note: OpenRouter provides access to multiple image generation models through a single API, making it easy to switch between different providers.`}
>


<LanguageContent language="typescript">
<CodeGroup title="Generate Image with OpenRouter" exampleTitle="Generate Image with OpenRouter">
```ts {{ title: 'index.ts' }}
import 'dotenv/config';
import { Langbase } from 'langbase';

const langbase = new Langbase({
	apiKey: process.env.LANGBASE_API_KEY!,
});

async function main() {
	// Check if API keys are available
	if (!process.env.LANGBASE_API_KEY) {
		console.error('❌ LANGBASE_API_KEY is not set in environment variables');
		return;
	}

	if (!process.env.OPENROUTER_API_KEY) {
		console.error('❌ OPENROUTER_API_KEY is not set in environment variables');
		console.log('Please add your OpenRouter API key to the .env file');
		return;
	}

	const result = await langbase.images.generate({
		prompt: "A majestic dragon soaring through clouds above a fantasy castle, epic fantasy art style, detailed scales and wings",
		model: "openrouter:google/gemini-2.5-flash-image-preview",
		apiKey: process.env.OPENROUTER_API_KEY!
	});

	console.log('✅ Image generated successfully via OpenRouter!');
	console.log('Image URL:', result.choices[0].message.images[0].image_url.url);
}

main();
```
</CodeGroup>
</LanguageContent>

<LanguageContent language="python">
<CodeGroup title="Generate Image with OpenRouter" exampleTitle="Generate Image with OpenRouter">
```python {{ title: 'index.py' }}
import os
from langbase import Langbase
from dotenv import load_dotenv

load_dotenv()

langbase = Langbase(api_key=os.getenv('LANGBASE_API_KEY'))

def main():
	# Check if API keys are available
	if not os.getenv('LANGBASE_API_KEY'):
		print('❌ LANGBASE_API_KEY is not set in environment variables')
		return

	if not os.getenv('OPENROUTER_API_KEY'):
		print('❌ OPENROUTER_API_KEY is not set in environment variables')
		print('Please add your OpenRouter API key to the .env file')
		return

	result = langbase.images.generate(
		prompt="A majestic dragon soaring through clouds above a fantasy castle, epic fantasy art style, detailed scales and wings",
		model="openrouter:google/gemini-2.5-flash-image-preview",
		api_key=os.getenv('OPENROUTER_API_KEY')
	)

	print('✅ Image generated successfully via OpenRouter!')
	print('Image URL:', result['choices'][0]['message']['images'][0]['image_url']['url'])

if __name__ == '__main__':
	main()
```
</CodeGroup>
</LanguageContent>

</RunExample>
</LanguageProvider>


---
