import { generateMetadata } from '@/lib/generate-metadata';
import { LanguageProvider, SimpleLanguageToggle, LanguageContent } from '@/components/LanguageToggle';
export const metadata = generateMetadata({
    title: 'Memory Retrieve with Filters NotIn',
    description: `An example of how to retrieve memories with NotIn filters.`,
    section: 'Examples',
    slug: '/examples/memory/retrieve-filters-NotIn'
});

# Retrieve Memories with Filters NotIn

This example demonstrates how to retrieve memories from Langbase with filters.


<LanguageProvider defaultLanguage='typescript'>

<RunExample api="/docs/api/memory"

	title="Retrieve from a Memory Example with Filters And"
	output={`[
	{
		text: 'Langbase is a platform for building and deploying AI agents.',
		similarity: 0.50209558,
		meta: {
			docName: 'readme.md',
			documentName: 'readme.md',
			company: 'Langbase'
		}
	},
	{
		text: 'Langbase have pipe agent, memory, and many other features',
		similarity: 0.50209558,
		meta: {
			docName: 'readme.md',
			documentName: 'readme.md',
			company: 'Langbase'
		}
	},
	{
		text: 'Langbase is a platform for building and deploying AI agents.',
		similarity: 0.50209558,
		meta: {
			docName: 'readme.md',
			documentName: 'readme.md',
			company: 'Langbase'
		}
	}
];
`}
explanation={`
This code demonstrates how to retrieve filtered information from a memory using Langbase, tailored to our specific use case. Here's a step-by-step guide:

1. Memory Retrieval with Filters:
   - Specifies the memory name "memory-sdk"
   - Defines the filters to narrow down the search results based on our specific criteria
   - Defines the query to retrieve relevant information

2. Execution:
   - The query is executed using the Langbase SDK with the specified filters
   - Retrieves the top 3 relevant results from the specified memory
	`}
>


<LanguageContent language="typescript">
<CodeGroup title="Retrieve from a Memory Example with Filters And" exampleTitle="Retrieve from a Memory Example with Filters And">
```ts {{ title: 'index.ts' }}
/**
 * Basic example to demonstrate how to retrieve memories with filters.
 *
 * - NotIn: This filter is used to retrieve memories that do not match any of the value/values in the array.
 *
 * In this example, we retrieve memories with the following filters:
 * - company: Google
 *
 * We expect to get all chunks of memory from the Langbase Docs memory that do not have the company Google.
 *
 */

import 'dotenv/config';
import {Langbase} from 'langbase';

const langbase = new Langbase({
	apiKey: process.env.LANGBASE_API_KEY!,
});

async function main() {
	const response = await langbase.memories.retrieve({
		memory: [
			{
				name: "memory-sdk",
				filters: ["company", "NotIn", "Google"],
			},
		],
		query: "What are pipes in Langbase?",
		topK: 3
	});

	console.log(response);
}

main();
```
</CodeGroup>
</LanguageContent>

<LanguageContent language="python">
<CodeGroup title="Retrieve from a Memory Example with Filters NotIn" exampleTitle="Retrieve from a Memory Example with Filters NotIn">
```python {{ title: 'index.py' }}
import os
from langbase import Langbase
from dotenv import load_dotenv

load_dotenv()

langbase = Langbase(api_key=os.getenv('LANGBASE_API_KEY'))

def main():
    response = langbase.memories.retrieve(
        memory=[
            {
                'name': 'memory-sdk',
                'filters': [
                    ["company", "NotIn", ["Google"]]
                ]
            }
        ],
        query='What are pipes in Langbase Docs?',
        top_k=3
    )

    print(response)

if __name__ == '__main__':
    main()
```
</CodeGroup>

</LanguageContent>

</RunExample>
</LanguageProvider>
